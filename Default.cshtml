@{
    var pageId = Context.GetRouteValue("pageId");
    //var pageId0 = Context.GetRouteValue("p0");
    //if(pageId == null){Response.SetStatus(HttpStatusCode.NotFound);}
    
    if (pageId == null){pageId = "default";}

    var db = Database.Open("Datebase");

    var page = db.QuerySingle("SELECT * FROM Pages WHERE Url = @0", pageId);
    if (page == null) {
       try{
        page = db.QuerySingle("SELECT * FROM Pages WHERE Id = @0", pageId);
        if (page == null){Response.SetStatus(HttpStatusCode.NotFound);  }
        } catch{
            Response.SetStatus(HttpStatusCode.NotFound);    
        }
        
    }



   Page.Title = page.Name;
   Page.Description = page.Description;
   Page.Author = page.Author;
   Layout = "~/Components/Layouts/_l" + page.Layout + ".cshtml";

   
}


@Html.Raw(page.Content)




